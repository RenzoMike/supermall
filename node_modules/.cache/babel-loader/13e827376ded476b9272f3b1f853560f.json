{"ast":null,"code":"import BScroll from '@better-scroll/core';\nimport Pullup from '@better-scroll/pull-up';\nBScroll.use(Pullup);\nexport default {\n  name: 'Scroll',\n  props: {\n    probeType: {\n      type: Number,\n      default: 0\n    },\n    pullUpLoad: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      bscroll: null\n    };\n  },\n\n  methods: {\n    // 滚动插件\n    initBscroll() {\n      this.bscroll = new BScroll(this.$refs.wrapper, {\n        pullUpLoad: this.pullUpLoad,\n        click: true,\n        probeType: this.probeType\n      });\n      this.bscroll.on('pullingUp', this.pullingUpHandler); // 监听滚动位置\n\n      this.bscroll.on('scroll', position => {\n        this.$emit('scroll', position);\n      }); // 监听上拉事件,实现上拉加载更多\n\n      this.bscroll.on('pullingUp', () => {\n        this.$emit('pullingup');\n      });\n    },\n\n    async pullingUpHandler() {\n      this.isPullUpLoad = true;\n      await this.requestData();\n      this.bscroll.finishPullUp(); // 重新计算高度\n\n      this.bscroll.refresh();\n      this.isPullUpLoad = false;\n    },\n\n    async requestData() {\n      try {\n        const newData = await this.ajaxGet();\n        this.data += newData;\n      } catch (err) {\n        // handle err\n        console.log(err);\n      }\n    },\n\n    ajaxGet() {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve(20);\n        }, 1000);\n      });\n    },\n\n    scrollTo(x, y, time = 300) {\n      this.scroll && this.scroll.scrollTo(x, y, time);\n    },\n\n    refresh() {\n      this.scroll && this.scroll.refresh();\n    },\n\n    finishPullUp() {\n      this.scroll && this.scroll.finishPullUp();\n    },\n\n    getScrollY() {\n      return this.scroll ? this.scroll.y : 0;\n    }\n\n  },\n\n  mounted() {\n    this.initBscroll();\n  },\n\n  created() {},\n\n  computed: {},\n  components: {}\n};","map":{"version":3,"mappings":"AAUA;AACA;AACAA;AACA;EACAC,cADA;EAEAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,aADA;MAEAC;IAFA;EALA,CAFA;;EAYAE;IACA;MACAC;IADA;EAGA,CAhBA;;EAiBAC;IACA;IACAC;MACA;QACAJ,2BADA;QAEAK,WAFA;QAGAR;MAHA;MAKA,oDANA,CAOA;;MACA;QACA;MACA,CAFA,EARA,CAWA;;MACA;QACA;MACA,CAFA;IAGA,CAjBA;;IAkBA;MACA;MAEA;MACA,4BAJA,CAKA;;MACA;MACA;IACA,CA1BA;;IA2BA;MACA;QACA;QACA;MACA,CAHA,CAGA;QACA;QACAS;MACA;IACA,CAnCA;;IAoCAC;MACA;QACAC;UACAC;QACA,CAFA,EAEA,IAFA;MAGA,CAJA;IAKA,CA1CA;;IA4CAC;MACA;IACA,CA9CA;;IA+CAC;MACA;IACA,CAjDA;;IAkDAC;MACA;IACA,CApDA;;IAqDAC;MACA;IACA;;EAvDA,CAjBA;;EA0EAC;IACA;EACA,CA5EA;;EA6EAC,WAEA,CA/EA;;EAgFAC,YAhFA;EAiFAC;AAjFA","names":["BScroll","name","props","probeType","type","default","pullUpLoad","data","bscroll","methods","initBscroll","click","console","ajaxGet","setTimeout","resolve","scrollTo","refresh","finishPullUp","getScrollY","mounted","created","computed","components"],"sourceRoot":"src/components/common/scroll","sources":["Scroll.vue"],"sourcesContent":["<template>\n  <!--  -->\n  <div ref=\"wrapper\">\n    <div class=\"content\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BScroll from '@better-scroll/core'\nimport Pullup from '@better-scroll/pull-up'\nBScroll.use(Pullup)\nexport default {\n  name: 'Scroll',\n  props: {\n    probeType: {\n      type: Number,\n      default: 0\n    },\n    pullUpLoad: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      bscroll: null,\n    }\n  },\n  methods: {\n    // 滚动插件\n    initBscroll () {\n      this.bscroll = new BScroll(this.$refs.wrapper, {\n        pullUpLoad: this.pullUpLoad,\n        click: true,\n        probeType: this.probeType\n      })\n      this.bscroll.on('pullingUp', this.pullingUpHandler)\n      // 监听滚动位置\n      this.bscroll.on('scroll', (position) => {\n        this.$emit('scroll', position)\n      })\n      // 监听上拉事件,实现上拉加载更多\n      this.bscroll.on('pullingUp', () => {\n        this.$emit('pullingup')\n      })\n    },\n    async pullingUpHandler () {\n      this.isPullUpLoad = true\n\n      await this.requestData()\n      this.bscroll.finishPullUp()\n      // 重新计算高度\n      this.bscroll.refresh()\n      this.isPullUpLoad = false\n    },\n    async requestData () {\n      try {\n        const newData = await this.ajaxGet(/* url */)\n        this.data += newData\n      } catch (err) {\n        // handle err\n        console.log(err)\n      }\n    },\n    ajaxGet (/* url */) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve(20)\n        }, 1000)\n      })\n    },\n\n    scrollTo (x, y, time = 300) {\n      this.scroll && this.scroll.scrollTo(x, y, time)\n    },\n    refresh () {\n      this.scroll && this.scroll.refresh()\n    },\n    finishPullUp () {\n      this.scroll && this.scroll.finishPullUp()\n    },\n    getScrollY () {\n      return this.scroll ? this.scroll.y : 0\n    }\n  },\n  mounted () {\n    this.initBscroll()\n  },\n  created () {\n\n  },\n  computed: {},\n  components: {},\n}\n</script>\n\n<style scoped>\n</style>\n"]},"metadata":{},"sourceType":"module"}