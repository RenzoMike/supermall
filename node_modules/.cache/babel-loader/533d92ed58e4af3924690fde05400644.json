{"ast":null,"code":"import DetailNavBar from './childComps/DetailNavBar.vue';\nimport DetailCarousel from './childComps/DetailCarousel.vue';\nimport DetailShopInfo from './childComps/DetailShopInfo.vue';\nimport DetailBaseInfo from './childComps/DetailBaseInfo.vue';\nimport DetailGoodsInfo from './childComps/DetailGoodsInfo.vue';\nimport DetailParamInfo from './childComps/DetailParamInfo.vue';\nimport DetailBottomBar from './childComps/DetailBottomBar.vue';\nimport BackTop from 'components/content/backTop/BackTop';\nimport Scroll from 'components/common/scroll/Scroll';\nimport { getDetail, Goods, Shop, GoodsParam } from '@/network/detail';\nexport default {\n  name: 'Detail',\n  props: {},\n\n  data() {\n    return {\n      iid: null,\n      res: null,\n      topImages: [],\n      goods: {},\n      shop: {},\n      detailInfo: {},\n      paramsInfo: {},\n      isBackTop: false\n    };\n  },\n\n  created() {\n    this.iid = this.$route.params.iid;\n    getDetail(this.iid).then(res => {\n      const {\n        result\n      } = res.data;\n      this.topImages = result.itemInfo.topImages; // 获取商品信息\n\n      this.goods = new Goods(result.itemInfo, result.columns, result.shopInfo.services); // 创建店铺信息\n\n      this.shop = new Shop(result.shopInfo); // 保存商品的详情数据\n\n      this.detailInfo = result.detailInfo; // 获取参数信息\n\n      this.paramsInfo = new GoodsParam(result.itemParams.info, result.itemParams.rule);\n    });\n  },\n\n  mounted() {},\n\n  methods: {\n    imageLoad() {\n      this.$refs.scroll.refresh();\n    },\n\n    titleClick(index) {},\n\n    backTop() {\n      this.$refs.scroll && this.$refs.scroll.scrollTo(0, 0, 1000);\n    },\n\n    handleScroll(position) {\n      this.isBackTop = position.y < -600;\n    },\n\n    addToCart() {\n      // 获取购物车需要展示的信息\n      const product = {};\n      product.image = this.topImages[0];\n      product.title = this.goods.title;\n      product.desc = this.goods.desc;\n      product.price = this.goods.realPrice;\n      product.iid = this.iid; // 将商品添加到购物车里\n\n      console.log(product);\n    }\n\n  },\n  computed: {},\n  components: {\n    DetailNavBar,\n    DetailCarousel,\n    DetailBaseInfo,\n    DetailShopInfo,\n    DetailGoodsInfo,\n    Scroll,\n    DetailParamInfo,\n    BackTop,\n    DetailBottomBar\n  }\n};","map":{"version":3,"mappings":"AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;EACAA,cADA;EAEAC,SAFA;;EAGAC;IACA;MACAC,SADA;MAEAC,SAFA;MAGAC,aAHA;MAIAC,SAJA;MAKAC,QALA;MAMAC,cANA;MAOAC,cAPA;MAQAC;IARA;EAUA,CAdA;;EAeAC;IACA;IAEAC;MACA;QAAAC;MAAA;MACA,2CAFA,CAGA;;MACA,kFAJA,CAMA;;MACA,sCAPA,CASA;;MACA,oCAVA,CAYA;;MACA;IACA,CAdA;EAeA,CAjCA;;EAkCAC,WACA,CAnCA;;EAoCAC;IACAC;MACA;IACA,CAHA;;IAIAC,mBACA,CALA;;IAMAC;MACA;IACA,CARA;;IASAC;MACA;IACA,CAXA;;IAYAC;MACA;MACA;MACAC;MACAA;MACAA;MACAA;MACAA,uBAPA,CASA;;MACAC;IACA;;EAvBA,CApCA;EA6DAC,YA7DA;EAgEAC;IACAC,YADA;IAEAC,cAFA;IAGAC,cAHA;IAIAC,cAJA;IAKAC,eALA;IAMAC,MANA;IAOAC,eAPA;IAQAC,OARA;IASAC;EATA;AAhEA","names":["name","props","data","iid","res","topImages","goods","shop","detailInfo","paramsInfo","isBackTop","created","getDetail","result","mounted","methods","imageLoad","titleClick","backTop","handleScroll","addToCart","product","console","computed","components","DetailNavBar","DetailCarousel","DetailBaseInfo","DetailShopInfo","DetailGoodsInfo","Scroll","DetailParamInfo","BackTop","DetailBottomBar"],"sourceRoot":"src/views/detail","sources":["Detail.vue"],"sourcesContent":["<template>\n  <div id=\"detail\">\n    <!-- 导航栏 -->\n    <detail-nav-bar\n      @titleClick=\"titleClick\"\n      class=\"detail-nav\"\n    ></detail-nav-bar>\n    <scroll\n      class=\"content\"\n      ref=\"scroll\"\n      @scroll=\"handleScroll\"\n      :pull-up-load=\"true\"\n    >\n      <detail-carousel :top-images=\"topImages\"></detail-carousel>\n      <detail-base-info :goods=\"goods\"></detail-base-info>\n      <detail-shop-info :shop=\"shop\"></detail-shop-info>\n      <detail-goods-info\n        :detail-info=\"detailInfo\"\n        @imageLoad=\"imageLoad\"\n      ></detail-goods-info>\n      <detail-param-info :param-info=\"paramsInfo\"></detail-param-info>\n    </scroll>\n    <back-top @click.native=\"backTop\" v-show=\"isBackTop\"></back-top>\n    <detail-bottom-bar @addToCart=\"addToCart\"></detail-bottom-bar>\n  </div>\n</template>\n\n<script>\nimport DetailNavBar from './childComps/DetailNavBar.vue'\nimport DetailCarousel from './childComps/DetailCarousel.vue'\nimport DetailShopInfo from './childComps/DetailShopInfo.vue'\nimport DetailBaseInfo from './childComps/DetailBaseInfo.vue'\nimport DetailGoodsInfo from './childComps/DetailGoodsInfo.vue'\nimport DetailParamInfo from './childComps/DetailParamInfo.vue'\nimport DetailBottomBar from './childComps/DetailBottomBar.vue'\n\nimport BackTop from 'components/content/backTop/BackTop'\nimport Scroll from 'components/common/scroll/Scroll'\n\nimport { getDetail, Goods, Shop, GoodsParam } from '@/network/detail'\nexport default {\n  name: 'Detail',\n  props: {},\n  data () {\n    return {\n      iid: null,\n      res: null,\n      topImages: [],\n      goods: {},\n      shop: {},\n      detailInfo: {},\n      paramsInfo: {},\n      isBackTop: false\n    }\n  },\n  created () {\n    this.iid = this.$route.params.iid\n\n    getDetail(this.iid).then(res => {\n      const { result } = res.data\n      this.topImages = result.itemInfo.topImages\n      // 获取商品信息\n      this.goods = new Goods(result.itemInfo, result.columns, result.shopInfo.services)\n\n      // 创建店铺信息\n      this.shop = new Shop(result.shopInfo)\n\n      // 保存商品的详情数据\n      this.detailInfo = result.detailInfo\n\n      // 获取参数信息\n      this.paramsInfo = new GoodsParam(result.itemParams.info, result.itemParams.rule)\n    })\n  },\n  mounted () {\n  },\n  methods: {\n    imageLoad () {\n      this.$refs.scroll.refresh()\n    },\n    titleClick (index) {\n    },\n    backTop () {\n      this.$refs.scroll && this.$refs.scroll.scrollTo(0, 0, 1000)\n    },\n    handleScroll (position) {\n      this.isBackTop = position.y < -600\n    },\n    addToCart () {\n      // 获取购物车需要展示的信息\n      const product = {}\n      product.image = this.topImages[0]\n      product.title = this.goods.title\n      product.desc = this.goods.desc\n      product.price = this.goods.realPrice\n      product.iid = this.iid\n\n      // 将商品添加到购物车里\n      console.log(product)\n    }\n  },\n  computed: {\n\n  },\n  components: {\n    DetailNavBar,\n    DetailCarousel,\n    DetailBaseInfo,\n    DetailShopInfo,\n    DetailGoodsInfo,\n    Scroll,\n    DetailParamInfo,\n    BackTop,\n    DetailBottomBar\n  },\n}\n</script>\n\n<style scoped>\n#detail {\n  position: relative;\n  height: 100vh;\n  z-index: 10;\n  background-color: #fff;\n}\n.detail-nav {\n  position: relative;\n  z-index: 9;\n  background-color: #fff;\n}\n.content {\n  /* position: absolute;\n  overflow: hidden;\n  top: 44px;\n  bottom: 0;\n  left: 0;\n  right: 0; */\n  height: calc(100% - 44px);\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}