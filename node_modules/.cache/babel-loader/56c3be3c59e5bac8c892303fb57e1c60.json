{"ast":null,"code":"import BScroll from '@better-scroll/core';\nimport Pullup from '@better-scroll/pull-up';\nBScroll.use(Pullup);\nexport default {\n  name: 'Scroll',\n  props: {},\n\n  data() {\n    return {\n      bscroll: null,\n      isPullUpLoad: false,\n      msg: 123\n    };\n  },\n\n  methods: {\n    // 滚动插件\n    initBscroll() {\n      this.bscroll = new BScroll(this.$refs.wrapper, {\n        pullUpLoad: true,\n        click: true\n      });\n      this.bscroll.on('pullingUp', this.pullingUpHandler); // 监听滚动位置\n\n      this.bscroll.on('scroll', position => {\n        console.log(position);\n      });\n    },\n\n    async pullingUpHandler() {\n      this.isPullUpLoad = true;\n      await this.requestData();\n      this.bscroll.finishPullUp();\n      this.bscroll.refresh();\n      this.isPullUpLoad = false;\n    },\n\n    async requestData() {\n      try {\n        const newData = await this.ajaxGet();\n        this.data += newData;\n      } catch (err) {\n        // handle err\n        console.log(err);\n      }\n    },\n\n    ajaxGet() {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve(20);\n        }, 1000);\n      });\n    }\n\n  },\n\n  mounted() {\n    this.initBscroll();\n  },\n\n  created() {},\n\n  computed: {},\n  components: {}\n};","map":{"version":3,"mappings":"AAUA;AACA;AACAA;AACA;EACAC,cADA;EAEAC,SAFA;;EAGAC;IACA;MACAC,aADA;MAEAC,mBAFA;MAGAC;IAHA;EAKA,CATA;;EAUAC;IACA;IACAC;MACA;QACAC,gBADA;QAEAC;MAFA;MAIA,oDALA,CAMA;;MACA;QACAC;MACA,CAFA;IAGA,CAZA;;IAaA;MACA;MAEA;MAEA;MACA;MACA;IACA,CArBA;;IAsBA;MACA;QACA;QACA;MACA,CAHA,CAGA;QACA;QACAA;MACA;IACA,CA9BA;;IA+BAC;MACA;QACAC;UACAC;QACA,CAFA,EAEA,IAFA;MAGA,CAJA;IAKA;;EArCA,CAVA;;EAiDAC;IACA;EACA,CAnDA;;EAoDAC,WACA,CArDA;;EAsDAC,YAtDA;EAuDAC;AAvDA","names":["BScroll","name","props","data","bscroll","isPullUpLoad","msg","methods","initBscroll","pullUpLoad","click","console","ajaxGet","setTimeout","resolve","mounted","created","computed","components"],"sourceRoot":"src/components/common/scroll","sources":["Scroll.vue"],"sourcesContent":["<template>\n  <!--  -->\n  <div ref=\"wrapper\">\n    <div class=\"content\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BScroll from '@better-scroll/core'\nimport Pullup from '@better-scroll/pull-up'\nBScroll.use(Pullup)\nexport default {\n  name: 'Scroll',\n  props: {},\n  data () {\n    return {\n      bscroll: null,\n      isPullUpLoad: false,\n      msg: 123\n    }\n  },\n  methods: {\n    // 滚动插件\n    initBscroll () {\n      this.bscroll = new BScroll(this.$refs.wrapper, {\n        pullUpLoad: true,\n        click: true\n      })\n      this.bscroll.on('pullingUp', this.pullingUpHandler)\n      // 监听滚动位置\n      this.bscroll.on('scroll', (position) => {\n        console.log(position)\n      })\n    },\n    async pullingUpHandler () {\n      this.isPullUpLoad = true\n\n      await this.requestData()\n\n      this.bscroll.finishPullUp()\n      this.bscroll.refresh()\n      this.isPullUpLoad = false\n    },\n    async requestData () {\n      try {\n        const newData = await this.ajaxGet(/* url */)\n        this.data += newData\n      } catch (err) {\n        // handle err\n        console.log(err)\n      }\n    },\n    ajaxGet (/* url */) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve(20)\n        }, 1000)\n      })\n    }\n  },\n  mounted () {\n    this.initBscroll()\n  },\n  created () {\n  },\n  computed: {},\n  components: {},\n}\n</script>\n\n<style scoped>\n</style>\n"]},"metadata":{},"sourceType":"module"}