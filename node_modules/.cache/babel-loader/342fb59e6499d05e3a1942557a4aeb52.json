{"ast":null,"code":"import Vue from 'vue';\nimport Vuex from 'vuex';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    cartList: []\n  },\n  mutations: {\n    // mutations里面的方法尽可能单一\n    addCounter(state, {\n      oldproduct\n    }) {\n      oldproduct.count += 1;\n    },\n\n    addToCart(state) {\n      state.cartList.push(payload);\n    }\n\n  },\n  actions: {\n    addCart({\n      state,\n      commit\n    }, payload) {\n      // payload新添加的商品\n      // 创建新的变量存储item\n\n      /*let oldProduct = null\n      // 判断购物车里面有没有在cartList里面存在\n      for (let item in state.cartList) {\n        // 判断id是否存在\n        if (item.iid === payload.iid) {\n          oldProduct = item\n        }\n      }*/\n      // 查找数组种是否有该商品\n      let oldproduct = state.cartList.find(item => item.iid === payload.iid); // 如果已存在\n\n      if (oldproduct) {\n        commit('addCounter', oldproduct);\n      } else {\n        commit('addToCart', payload); // 否则\n\n        payload.count = 1;\n      }\n    }\n\n  }\n});","map":{"version":3,"names":["Vue","Vuex","use","Store","state","cartList","mutations","addCounter","oldproduct","count","addToCart","push","payload","actions","addCart","commit","find","item","iid"],"sources":["/Users/bujidefeng/Desktop/Vue_Code/17 mall/supermall/src/store/index.js"],"sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    cartList: []\n  },\n  mutations: {\n    // mutations里面的方法尽可能单一\n    addCounter (state, { oldproduct }) {\n      oldproduct.count += 1\n    },\n    addToCart (state) {\n      state.cartList.push(payload)\n    }\n  },\n  actions: {\n    addCart ({ state, commit }, payload) {\n      // payload新添加的商品\n      // 创建新的变量存储item\n      /*let oldProduct = null\n      // 判断购物车里面有没有在cartList里面存在\n      for (let item in state.cartList) {\n        // 判断id是否存在\n        if (item.iid === payload.iid) {\n          oldProduct = item\n        }\n      }*/\n      // 查找数组种是否有该商品\n      let oldproduct = state.cartList.find(item => item.iid === payload.iid)\n\n      // 如果已存在\n      if (oldproduct) {\n        commit('addCounter', oldproduct)\n\n      } else {\n        commit('addToCart', payload)\n        // 否则\n        payload.count = 1\n\n      }\n    }\n  }\n})"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEAD,GAAG,CAACE,GAAJ,CAAQD,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACE,KAAT,CAAe;EAC5BC,KAAK,EAAE;IACLC,QAAQ,EAAE;EADL,CADqB;EAI5BC,SAAS,EAAE;IACT;IACAC,UAAU,CAAEH,KAAF,EAAS;MAAEI;IAAF,CAAT,EAAyB;MACjCA,UAAU,CAACC,KAAX,IAAoB,CAApB;IACD,CAJQ;;IAKTC,SAAS,CAAEN,KAAF,EAAS;MAChBA,KAAK,CAACC,QAAN,CAAeM,IAAf,CAAoBC,OAApB;IACD;;EAPQ,CAJiB;EAa5BC,OAAO,EAAE;IACPC,OAAO,CAAE;MAAEV,KAAF;MAASW;IAAT,CAAF,EAAqBH,OAArB,EAA8B;MACnC;MACA;;MACA;AACN;AACA;AACA;AACA;AACA;AACA;AACA;MACM;MACA,IAAIJ,UAAU,GAAGJ,KAAK,CAACC,QAAN,CAAeW,IAAf,CAAoBC,IAAI,IAAIA,IAAI,CAACC,GAAL,KAAaN,OAAO,CAACM,GAAjD,CAAjB,CAZmC,CAcnC;;MACA,IAAIV,UAAJ,EAAgB;QACdO,MAAM,CAAC,YAAD,EAAeP,UAAf,CAAN;MAED,CAHD,MAGO;QACLO,MAAM,CAAC,WAAD,EAAcH,OAAd,CAAN,CADK,CAEL;;QACAA,OAAO,CAACH,KAAR,GAAgB,CAAhB;MAED;IACF;;EAzBM;AAbmB,CAAf,CAAf"},"metadata":{},"sourceType":"module"}